(function(b,a){var c=a(b);if(typeof module!=="undefined"&&typeof exports==="object"){module.exports=c}else{if(typeof define==="function"&&(define.amd||define.cmd)){define(function(){return c})}}})(typeof window!=="undefined"?window:global,function(b){var a=function(d){for(var c in d){return !1}return !0};if(!a(b.ejs)){return b.ejs}return(function(f,i){(function(){f.extend=function(){var w,p,n,o,t,u,s=arguments[0]||{},r=1,q=arguments.length,v=false;if(typeof s==="boolean"){v=s;s=arguments[r]||{};r++}if(typeof s!=="object"&&!f.isFunction(s)){s={}}if(r===q){s=this;r--}for(;r<q;r++){if((w=arguments[r])!=null){for(p in w){n=s[p];o=w[p];if(s===o){continue}if(v&&o&&(f.isPlainObject(o)||(t=f.isArray(o)))){if(t){t=false;u=n&&f.isArray(n)?n:[]}else{u=n&&f.isPlainObject(n)?n:{}}s[p]=f.extend(v,u,o)}else{if(o!==undefined){s[p]=o}}}}}return s};f.isFunction=function(n){return f.type(n)==="function"};f.isPlainObject=function(n){return f.isObject(n)&&!f.isWindow(n)&&Object.getPrototypeOf(n)===Object.prototype};f.isArray=Array.isArray||function(n){return n instanceof Array};f.isWindow=function(n){return n!=null&&n===n.window};f.isObject=function(n){return f.type(n)==="object"};f.type=function(n){return n==null?String(n):m[{}.toString.call(n)]||"object"};f.each=function(p,q,o){if(!p){return this}if(typeof p.length==="number"){[].every.call(p,function(s,r){return q.call(s,r,s)!==false})}else{for(var n in p){if(o){if(p.hasOwnProperty(n)){if(q.call(p[n],n,p[n])===false){return p}}}else{if(q.call(p[n],n,p[n])===false){return p}}}}return this};var m={};f.each(["Boolean","Number","String","Function","Array","Date","RegExp","Object","Error"],function(o,n){m["[object "+n+"]"]=n.toLowerCase()});(function(){function n(p){this.os={};this.os.name="browser";var o=[function(){var q=p.match(/(Android);?[\s\/]+([\d.]+)?/);if(q){this.os.android=true;this.os.version=q[2];this.os.isBadAndroid=!(/Chrome\/\d/.test(window.navigator.appVersion));this.os.name+="_Android";this.os.name+="_mobile"}return this.os.android===true},function(){var r=p.match(/(iPhone\sOS)\s([\d_]+)/);if(r){this.os.ios=this.os.iphone=true;this.os.version=r[2].replace(/_/g,".");this.os.name+="_iphone";this.os.name+="_mobile"}else{var q=p.match(/(iPad).*OS\s([\d_]+)/);if(q){this.os.ios=this.os.ipad=true;this.os.version=q[2].replace(/_/g,".");this.os.name+="_iOS";this.os.name+="_mobile"}}return this.os.ios===true}];[].every.call(o,function(q){return !q.call(f)})}n.call(f,navigator.userAgent)})();(function(){function n(q){this.os=this.os||{};var p=q.match(/EpointEJS/i);if(p){this.os.ejs=true;this.os.name+="_ejs"}var o=q.match(/DingTalk/i);if(o){this.os.dd=true;this.os.name+="_dd"}}n.call(f,navigator.userAgent)})()})();var d="epoint_bridge";ejs.EJS_API=d;var k="custom_epoint_bridge";ejs.EJS_API_CUSTOM=k;var h={};(function(){var o=Object.prototype.hasOwnProperty;window.JSBridge=window.top.JSBridge||{};var q="EpointJSBridge";var p=window.top.document.createElement("iframe");p.style.display="none";if(ejs.os.ejs&&ejs.os.ios){p.src=q+"://__BRIDGE_LOADED__"}document.documentElement.appendChild(p);var m={};var r=1;var x={};var s=true;var w=[];var t={registerHandler:function(y,z){x[y]=z},registerLongCallback:function(y,z){h[y]=z},callHandler:function(A,y,z,B){if(arguments.length==3&&typeof z=="function"){B=z;z=null}n(A,{handlerName:y,data:z},B)},_fetchQueue:function(){var y=JSON.stringify(w);w=[];return y},_handleMessageFromNative:function(y){if(s){setTimeout(z)}else{z()}function z(){var C;try{if(typeof y==="string"){C=JSON.parse(y)}else{C=y}}catch(D){console.error("原生调用H5方法出错,传入参数错误");return}var B;if(C.responseId){B=m[C.responseId];B=B||h[C.responseId];if(!B){return}B&&B(C.responseData);delete m[C.responseId]}else{if(C.callbackId){var E=C.callbackId;B=function(F){n(d,{handlerName:C.handlerName,responseId:E,responseData:F})}}var A=x[C.handlerName];if(!A){}else{A(C.data,B)}}}},disableJavscriptAlertBoxSafetyTimeout:function(){s=false}};function n(C,A,y){if(y&&(typeof y==="function")){var B=u.getCallbackId();m[B]=y;A.callbackId=B}else{if(typeof y==="string"||typeof y==="number"){A.callbackId=y}}if(ejs.os.ios){w.push(A)}var z=u.getUri(C,A);if(ejs.os.ejs){if(ejs.os.ios){p.src=z}else{window.top.prompt(z,"")}}else{console.error("浏览器中ejs无效,scheme:"+z)}}var u={getCallbackId:function(){return Math.floor(Math.random()*(1<<30))+""},getUri:function(B,z){var y=q+"://"+B;if(!ejs.os.ios){var A,D,C;if(z.callbackId){A=z.callbackId;D=z.handlerName;C=z.data}else{if(z.responseId){A=z.responseId;D=z.handlerName;C=z.responseData}}C=this.getParam(C);y+=":"+A+"/"+D+"?"+C}return y},getParam:function(y){if(y&&typeof y==="object"){return JSON.stringify(y)}else{return y||""}}};for(var v in t){if(!o.call(JSBridge,v)){JSBridge[v]=t[v]}}JSBridge.registerHandler("testH5Func",function(y,z){alert("测试函数接收到数据:"+JSON.stringify(y));z&&z("测试回传数据...")})})();(function(){function n(q,s,t,o){o=o||false;if(!ejs[q]){ejs[q]={}}var r=ejs[q];var p=r[s];r[s]=function(){!o&&p&&p.apply(this,arguments);t.apply(this,arguments)}}function m(o,q){for(var p in q){n(o,p,q[p])}}f.extendFuc=n;f.extendFucObj=m})();var e="file:///android_asset/";var c="";function l(){var m=window.ejsForceLocal||i;var q="";if(!m){var p=window.location;var n=p.pathname;var o="";o=n.substr(0,n.lastIndexOf("/html/")+1);q=p.protocol+"//"+p.host+o}else{if(ejs.os.android){q=e}else{if(ejs.os.ios){q=c}}}return q}function j(n){if(/^(http|https|ftp)/g.test(n)){return n}var m=n.indexOf("./")!=-1||n.indexOf("../")!=-1;n=(m?n:((l())+n));return n}function g(m,p){m=m||"";m=j(m);var n="";if(p){for(var o in p){if(n.indexOf("?")==-1&&m.indexOf("?")==-1){n+="?"}else{n+="&"}n+=o+"="+p[o]}}m=m+n;return m}ejs.page={openPage:function(o,p,r,n,q,m){r=r||{};n=n||{};o=g(o,r);n.PAGE_URL=o;n.PAGE_TITLE=p||"";if(ejs.os.ejs||n.isDebug){JSBridge.callHandler(d,"openPage",{finishAfterOpen:n.finishAfterOpen||"0",requestCode:n.requestCode||1101,data:n},function(s){if(s.code=="4"){q&&q(s.result,s.msg,s)}else{if(s.code=="0"){m&&m(s)}else{m&&m(s)}}})}else{document.location.href=o}},openPageMulti:function(n,q,s){var r=[];for(var o=0,m=n.length;o<m;o++){r[o]={};r[o].PAGE_URL=g(n[o].url,n[o].jsonObj);r[o].PAGE_TITLE=n[o].title;for(var p in n[o].options){r[o][p]=n[o].options[p]}}JSBridge.callHandler(d,"openPage",{finishAfterOpen:q.finishAfterOpen||"0",requestCode:q.requestCode||"1101",data:r},function(t){if(t.code=="4"){s&&s(t.result,t.msg,t)}})},openLocal:function(o,q,n,p,m){q=q||{};if(typeof arguments[2]==="function"){n={};p=arguments[2];m=arguments[3]}n=n||{};q=ejs.extend(q,n,false);JSBridge.callHandler(d,"openLocal",{localPageClassName:o,finishAfterOpen:n.finishAfterOpen||"0",requestCode:n.requestCode||"1101",openExistLocal:n.openExistLocal||false,data:q},function(r){if(r.code=="4"){p&&p(r.result,r.msg,r)}else{if(r.code=="0"){m&&m(r)}}})},closePage:function(m){if(typeof m==="object"){m=JSON.stringify(m)}if(ejs.os.ejs){JSBridge.callHandler(d,"closePage",{resultData:m},function(n){})}else{if(window.history.length>1){window.history.back();return true}}},setResumeReload:function(m){JSBridge.callHandler(d,"setResumeReload",{},function(n){m&&m(null,n.msg,n)})},setResumeCallback:function(n){var m="10000002";JSBridge.registerLongCallback(m,function(o){if(o.code=="3"){n&&n(o.result,o.msg,o)}});JSBridge.callHandler(d,"setResumeCallback",{},m)},reloadPage:function(m){if(ejs.os.ejs){JSBridge.callHandler(d,"reloadPage",{},function(n){m&&m(n.result,n.msg,n)})}else{window.location.reload()}}};ejs.nativeUI={toast:function(m){var n="";m=m||{};if(typeof m==="string"){n=m}else{n=m.message}JSBridge.callHandler(d,"toast",{message:n},function(o){})},alert:function(m){var o="",n="";m=m||{};if(typeof m==="string"){n=m;o=arguments[1]||""}else{n=m.message;o=m.title}JSBridge.callHandler(d,"showMsgDialog",{title:o,message:n},function(p){})},confirm:function(m,n){m=m||{};if(typeof m==="string"){m={message:m};if(typeof arguments[1]==="string"){m.title=arguments[1];n=arguments[2]}}JSBridge.callHandler(d,"showConfirmDialog",{title:m.title,message:m.message,btn1:m.btn1||"取消",btn2:m.btn2||(m.btn2!==null?"确定":""),cancelable:m.cancelable||0,},function(o){n&&n(o.result,o.msg,o)})},prompt:function(m,n){m=m||{};JSBridge.callHandler(d,"showEditTextDialog",{title:m.title,hint:m.hint,text:m.text,cancelable:m.cancelable||0,lines:m.lines||1,maxLength:m.maxLength||10000},function(o){n&&n(o.result,o.msg,o)})},select:function(m,o){m=m||{};m.items=m.items||[];m.checkState=m.checkState||[];var n=m.isMultiSelect||false;JSBridge.callHandler(d,"showSelectedDialog",{title:m.title,items:m.items.join(","),checkState:m.checkState.join(","),cancelable:m.cancelable||0,isMultiSelect:n,type:m.type||0,columns:m.columns||3,},function(t){var u=[];var w=t.result;if(n){var r=w.choiceState;r=r.split(",");var x=[];for(var q=0,s=r.length;q<s;q++){if(r[q]!=null&&r[q]!=""){x.push(r[q]);if(r[q]=="1"){u.push(m.items[q]||"")}}}}else{var p=w.which;var v=m.items[p];u.push(v)}w.items=u;o&&o(t.result,t.msg,t)})},actionSheet:function(m,n){m=m||{};m.items=m.items||[];JSBridge.callHandler(d,"showActionsheet",{items:m.items.join(","),cancelable:m.cancelable||0},function(p){var o=-1;var q="";if(p.result){o=p.result.which||0;q=m.items[o];p.result.content=q}n&&n(p.result,p.msg,p)})},popWindow:function(m,n){m=m||{};m.titleItems=m.titleItems||[];m.iconItems=m.iconItems||[];JSBridge.callHandler(d,"showPopupWindow",{titleItems:m.titleItems.join(","),iconItems:m.iconItems.join(","),orientation:m.orientation||""},function(o){n&&n(o.result,o.msg,o)})},pickDate:function(m,n){m=m||{};JSBridge.callHandler(d,"showDatePickDialog",{title:m.title,datetime:m.datetime},function(o){n&&n(o.result,o.msg,o)})},pickTime:function(m,n){m=m||{};JSBridge.callHandler(d,"showTimePickDialog",{title:m.title,datetime:m.datetime},function(o){n&&n(o.result,o.msg,o)})},pickDateTime:function(m,n){m=m||{};JSBridge.callHandler(d,"showDateTimePickDialog",{title1:m.title1,title2:m.title2,datetime:m.datetime},function(o){n&&n(o.result,o.msg,o)})},showWaiting:function(){JSBridge.callHandler(d,"showProgress",{},function(m){})},showMask:function(){if(!this.mask){this.mask=mui.createMask()}this.mask.show()},hideMask:function(){if(this.mask){this.mask.close()}},closeWaiting:function(){JSBridge.callHandler(d,"hideProgress",{},function(m){})},pullToRefresh:{disable:function(){JSBridge.callHandler(d,"setSwipeRefreshEnable",{swipeRefreshEnable:false},function(m){})},enable:function(n){var m="10000001";JSBridge.registerLongCallback(m,function(o){if(o.code=="2"){n&&n(o.result,o.msg,o)}});JSBridge.callHandler(d,"setSwipeRefreshEnable",{swipeRefreshEnable:true},m)},stop:function(){JSBridge.callHandler(d,"stopSwipeRefresh",{},function(m){})}}};ejs.navigator={showNavigation:function(){JSBridge.callHandler(d,"showNavigation",{},function(m){})},hideNavigation:function(){JSBridge.callHandler(d,"hideNavigation",{},function(m){})},setTitle:function(m){m=m||"";JSBridge.callHandler(d,"setNaigationTitle",{PAGE_TITLE:m},function(n){})},setRightTextBtn:function(m,n){m=m||"";JSBridge.callHandler(d,"setNBRightText",{nbRightText:m},function(o){});if(n){window.onClickNBRightEJS=function(){n&&n()}}},setRightImageBtn:function(m){JSBridge.callHandler(d,"setNBRightImage",{nbRightImage:m},function(n){})},hideBackButton:function(){JSBridge.callHandler(d,"hideBackButton",{},function(m){})},showSearchBar:function(){JSBridge.callHandler(d,"showSearchBar",{},function(m){})},hideSearchBar:function(){JSBridge.callHandler(d,"hideSearchBar",{},function(m){})},setBgColor:function(m){JSBridge.callHandler(d,"setBgColor",{Color:m},function(n){})},setNbBarTheme:function(m){JSBridge.callHandler(d,"setNbBarTheme",{ThemeId:m},function(n){})},setSkinTheme:function(m){m=m||"default";if(m==="day"){ejs.navigator.setBgColor("ffffff");ejs.navigator.setNbBarTheme("theme_default_blue")}else{if(m==="night"){ejs.navigator.setBgColor("1a1a1a");ejs.navigator.setNbBarTheme("theme_night")}else{ejs.navigator.setBgColor("ffffff");ejs.navigator.setNbBarTheme("theme_default_blue")}}},};ejs.sql={getConfigValue:function(m,n){m=m||"";JSBridge.callHandler(d,"getConfigValue",{config_key:m},function(o){o=o||{};n&&n(o.result,o.msg,o)})},setConfigValue:function(m,n,o){m=m||"";JSBridge.callHandler(d,"setConfigValue",{config_key:m,config_value:n},function(p){p=p||{};o&&o(p.result,p.msg,p)})}};ejs.oauth={getToken:function(n,m){if(ejs.os.ejs){JSBridge.callHandler(d,"getToken",{},function(o){o=o||{};n&&n(o.result,o.msg,o)})}else{n&&n({result:{token:m||"gtig_newtech**##"}})}},getAppGuid:function(m){JSBridge.callHandler(d,"getAppGuid",{},function(n){n=n||{};m&&m(n.result,n.msg,n)})}};ejs.runtime={launchApp:function(m,n){m=m||{};JSBridge.callHandler(d,"openApp",{PackageName:m.PackageName,ClassName:m.ClassName,ActionName:m.ActionName,Scheme:m.Scheme,Param:m.Param},function(o){o=o||{};n&&n(o.result,o.msg,o)})},getVersionName:function(m,n){m=m||{};if(typeof m==="function"){n=m}JSBridge.callHandler(d,"getVersionName",{},function(o){o=o||{};n&&n(o.result,o.msg,o)})},};ejs.device={getNetWorkType:function(m){JSBridge.callHandler(d,"getNetWorkType",{},function(n){m&&m(n.result,n.msg,n)})},setOrientation:function(m){JSBridge.callHandler(d,"setOrientation",{orientation:m||"2"},function(n){n=n||{};callback&&callback(n.result,n.msg,n)})},getPixel:function(m){JSBridge.callHandler(d,"getPixel",{},function(n){n=n||{};m&&m(n.result,n.msg,n)})},getUAinfo:function(m){JSBridge.callHandler(d,"getUAinfo",{},function(n){n=n||{};m&&m(n.result,n.msg,n)})},getMacAddress:function(m){JSBridge.callHandler(d,"getMacAddress",{},function(n){n=n||{};m&&m(n.result,n.msg,n)})},getDeviceId:function(m){JSBridge.callHandler(d,"getDeviceid",{},function(n){n=n||{};m&&m(n.result,n.msg,n)})},callPhone:function(m,n){m=m||{};if(typeof m==="string"){m={phoneNum:m}}JSBridge.callHandler(d,"call",{phoneNum:m.phoneNum},function(o){n&&n(o.result,o.msg,o)})},sendMsg:function(m,n){m=m||{};if(typeof m==="string"){m={phoneNum:m,message:arguments[1]};n=arguments[2]}JSBridge.callHandler(d,"sendMsg",{phoneNum:m.phoneNum,message:m.message},function(o){n&&n(o.result,o.msg,o)})},isTablet:function(m){JSBridge.callHandler(d,"isTablet",{},function(n){n=n||{};m&&m(n.result,n.msg,n)})}};ejs.app={getExtraDataByKey:function(m){if(!m){return null}var o=function(r,v){var t=r.substring(r.indexOf("?")+1,r.length).split("&");var p={};var s,q;for(s=0;q=t[s];s++){p[q.substring(0,q.indexOf("=")).toLowerCase()]=q.substring(q.indexOf("=")+1,q.length)}var u=p[v.toLowerCase()];u=decodeURIComponent(u);if(typeof(u)=="undefined"){return undefined}else{return u}};var n=o(window.location.href,m);if(n==="undefined"){n=null}return n},appendParams:function(m,n){return g(m,n)},};ejs.nativeComponents={openScan:function(n,o,m){n=n||{};JSBridge.callHandler(d,"openScan",{isOrientationLocked:n.isOrientationLocked||"0"},function(p){if(p.code=="4"){o&&o(p.result,p.msg,p)}else{if(p.code=="0"){m&&m(p)}}})},downloadFile:function(n,o,m){n=n||{};JSBridge.callHandler(d,"downloadFile",{type:n.type||"其他",reDownloaded:n.reDownloaded,url:n.url,fileName:n.fileName,isBackground:n.isBackground||0,},function(p){if(p.code=="1"){o&&o(p.result,p.msg,p)}else{if(p.code=="0"){m&&m(p)}}})},historySearch:function(n,o,m){n=n||{};JSBridge.callHandler(d,"historySearch",{hint:n.hint},function(p){if(p.code=="4"){o&&o(p.result,p.msg,p)}else{if(p.code=="0"){m&&m(p)}}})},selectContact:function(n,o,m){n=n||{};JSBridge.callHandler(d,"selectContact",{isSingle:n.isSingle||"0",selectedInfo:n.selectedInfo,transFilterNames:n.transFilterNames||"",transFilterGuids:n.transFilterGuids||""},function(p){if(p.code=="4"||p.code=="1"){o&&o(p.result,p.msg,p)}else{if(p.code=="0"){m&&m(p)}}})},selectPics:function(n,o,m){n=n||{};JSBridge.callHandler(d,"selectPics",{maxPic:n.maxPic},function(p){if(p.code=="4"){o&&o(p.result,p.msg,p)}else{if(p.code=="0"){m&&m(p)}}})},previewPics:function(m){m=m||{};JSBridge.callHandler(d,"previewPics",{url:m.url,index:m.index||0},function(){})},updateApp:function(){JSBridge.callHandler(d,"updateApp",{},function(){})},sysShare:function(m){m=m||{};var n="";if(typeof m==="string"){n=m}else{n=m.shareTitle}JSBridge.callHandler(d,"sysShare",{shareTitle:n||"",shareURL:m.shareURL,shareImgBase64:m.shareImgBase64,shareImgURL:m.shareImgURL,SDPath:m.SDPath,},function(){})},playVideo:function(n,o,m){n=n||{};JSBridge.callHandler(d,"playVideo",{videoUrl:n.videoUrl||"",thumbUrl:n.thumbUrl||"",title:n.title||"",},function(p){if(p.code=="1"){o&&o(p.result,p.msg,p)}else{if(p.code=="0"){m&&m(p)}}})},collection:{saveLocalCollections:function(n,o,m){JSBridge.callHandler(d,"saveLocalCollections",{MsgGuid:n.MsgGuid||"",Title:n.Title||"",DateTime:n.DateTime||"",Publisher:n.Publisher||"",Type:n.Type||"",URL:n.URL||"",Remark:n.Remark||"",Flag:n.Flag||"",},function(p){if(p.code=="1"){o&&o(p.result,p.msg,p)}else{m&&m(p)}})},getLocalCollections:function(m,n){if(typeof arguments[0]==="function"){n=typeof arguments[0];m={}}m=m||{};JSBridge.callHandler(d,"getLocalCollections",{pageIndex:m.pageIndex||1,pageSize:m.pageSize||10},function(o){n&&n(o.result,o.msg,o)})},isCollection:function(m,n){JSBridge.callHandler(d,"isCollection",{MsgGuid:m},function(o){n&&n(o.result,o.msg,o)})},delCollection:function(n,o,m){JSBridge.callHandler(d,"delCollection",{MsgGuid:n},function(p){if(p.code=="1"){o&&o(p.result,p.msg,p)}else{m&&m(p)}})},delAllCollections:function(n,m){JSBridge.callHandler(d,"delAllCollections",{},function(o){if(o.code=="1"){n&&n(o.result,o.msg,o)}else{m&&m(o)}})},},};ejs.call=function(m,o,p,n){n=n||k;o=o||{};JSBridge.callHandler(n,m,o,function(q){p&&p(q.result,q.msg,q)})};return f})(b.ejs={},false)});